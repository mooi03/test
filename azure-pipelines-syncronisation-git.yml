trigger:
  branches:
    include:
      - main

pool:
  name: 'default'

steps:
- checkout: self
  persistCredentials: true

- script: |
    git remote add azure "https://dev.azure.com/tlonchampt/armand/_git/armand"
    
    git fetch azure
    git push azure --delete main

    git checkout main
    git pull origin main

    git push azure main:main --force
  displayName: "Synchroniser GitHub avec Azure DevOps en supprimant le contenu Azure"
